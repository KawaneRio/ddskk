==============
便利な応用機能
==============

ファイル構成
============

SKK の基本的な機能は ``skk.el`` に収められています。一方、DDSKK で応用機能を提供
するプログラムのほとんどは ``skk.el`` とは別のファイルに収めています。これらは、
必要に応じてオートロードするように設計されています。各応用機能の概略と該当のファ
イル名について説明します。

また、DDSKK の変数は ``skk-vars.el`` に集約されていますので、カスタマイズしたい場
合などには、このファイルを見ると参考になるかもしれません。

.. list-table::
   
   * - FILE
     - 説明
   * - ccc.el
     - buffer local cursor color control library
   * - cdb.el
     - constant database (cdb) reader for Emacs Lisp
   * - context-skk.el
     - | 編集の文脈に応じて自動的に skk のモードを切り替えたり、
       | SKK の各種設定を変更する機能を提供します。
   * - ddskk-pkg.el
     - Multi-file Packages in GNU Emacs Lisp Reference Manual
   * - skk-abbrev.el
     - SKK abbrev モードの機能を提供するプログラムを集めたファイル
   * - skk-act.el
     - dvorak 配列での拡張ローマ字入力 ACT を SKK で使うための設定
   * - skk-annotation.el
     - 個人辞書に付けたアノテーション（注釈）を活用するプログラムを集めたファイル
   * - skk-auto.el
     - 送り仮名の自動処理を行うプログラムを集めたファイル
   * - skk-autoloads.el
     - | ``make`` 時に自動生成されるファイル。
       | オートロードの設定のほか ``register-input-method`` も行う。
       | XEmacs で DDSKK をパッケージとしてインストールした場合は
       | ``auto-autoloads.el`` というファイルがこれに相当します。
   * - skk-azik.el
     - 拡張ローマ字入力 AZIK の設定を提供します
   * - skk-bayesian.el
     - | 学習効果を提供するプログラム
       | ユーザの過去の入力から変換候補を予測します
   * - skk-cdb.el
     - CDB 形式辞書ファイルを辞書サーバなしに直接利用できるプログラム
   * - skk-comp.el
     - 見出し語の補完を行うプログラムを集めたファイル
   * - skk-cursor.el
     - カーソルの色を制御するプログラムを集めたファイル
   * - skk-cus.el
     - ``M-x customize-group`` による対話的な設定変更機能の簡易版を提供します
   * - skk-dcomp.el
     - skk-comp による補完を自動的に実行して見出し語入力を支援します
   * - skk-develop.el
     - font-lock 関係のほか、おもに開発者向けのプログラムを集めたファイル
   * - skk-emacs.el
     - | GNU Emacs の拡張機能を利用するプログラムを集めたファイル
       | インジケータのカラー化や画像表示、ツールティップ利用など
   * - skk-gadget.el
     - プログラム実行変換を行うプログラムを集めたファイル
   * - skk-hint.el
     - SKK の変換候補が多いときにヒントを与えて絞りこむ機能を提供します
   * - skk-inline.el
     - 変換候補のインライン表示機能を集めたファイル
   * - skk-isearch.el
     - DDSKK を併用したインクリメンタル・サーチ機能を提供します
   * - skk-jisx0201.el
     - JIS X 0201 カナ [#]_ を利用する機能を提供します
   * - skk-jisx0213.el
     - JIS X 0213 文字集合を扱うプログラム
   * - skk-jisyo-edit-mode.el
     - SKK 辞書を編集するためのメジャーモードを提供します
   * - skk-kakasi.el
     - KAKASI インターフェイスプログラムを集めたファイル
   * - skk-kanagaki.el
     - | キーボードのかな配列などに対応する枠組みを提供します。
       | 旧 JIS 配列のかなキーボード及び NICOLA 規格の親指シフト配列に対応
   * - skk-kcode.el
     - 文字コードまたはメニューによる文字入力を行うプログラムを集めたファイル
   * - skk-leim.el
     - | LEIM 関連プログラムファイル
       | DDSKK を Emacs の input method として利用できるようにします
   * - skk-look.el
     - ``look`` コマンドとのインターフェイスプログラムを集めたファイル
   * - skk-lookup.el
     - Lookup で検索できる辞書を使って単語の候補を出力するプログラム
   * - skk-macs.el
     - 他のファイルで共通して使用するマクロなどを中心にまとめたファイル
   * - skk-num.el
     - 数値変換を行うプログラムを集めたファイル
   * - skk-search-web.el
     - | Google CGI API for Japanese Input を利用したかな漢字変換
       | 辞書登録モードに Google サジェストを初期表示する
   * - skk-server-completion.el
     - 拡張された辞書サーバによる見出し語補完機能を利用できます
   * - skk-server.el
     - 辞書サーバと通信して変換する機能を提供します
   * - skk-setup.el
     - 自動的に個人設定を行うためのファイル
   * - skk-show-mode.el
     - カーソル付近に入力モードを表示する機能を提供します
   * - skk-sticky.el
     - 変換開始位置及び送り開始位置の指定方法を変更可能にする
   * - skk-study.el
     - | 学習効果を提供するプログラム
       | 直前に確定したいくつかの語との関連性を確認し、候補順を操作する
   * - skk-tankan.el
     - SKK を使って単漢字変換を行うプログラム
   * - skk-tut.el
     - SKK チュートリアルプログラム
   * - skk-tutcode.el
     - SKK で TUT-code 入力を実現します
   * - skk-vars.el
     - DDSKK で使われる変数を集約したファイル
   * - skk-version.el
     - DDSKK のバージョン情報を提供するプログラムファイル
   * - skk-viper.el
     - VIPER インターフェイスプログラムを集めたファイル
   * - skk-xemacs.el
     - | XEmacs の拡張機能を利用するプログラムを集めたファイル
       | インジケータのカラー化や画像表示、ツールティップ利用など
   * - tar-util.el
     - utility for tar archive

ユーザオプションの設定方法
==========================

DDSKK のカスタマイズは、 ``~/.emacs.d/init.el`` あるいは ``~/.skk`` に記述します。
また、各ファイルの提供するフックも利用します。上記のファイルやフックを利用した設
定がいつ有効になるのか、という点についてここで説明します。

設定ファイル
------------

.. index::
   pair: File; ~/.emacs.d/init.el
   pair: File; ~/.xemacs/init.el

~/.emacs.d/init.el, ~/.xemacs/init.el
  Emacs を起動したときに一度だけ読み込まれます。

  [[info:emacs#Init File][The Emacs Initialization File in GNU Emacs Manual]]

  このマニュアルでは ``~/.emacs.d/init.el`` という記述で統一しています。

.. index::
   pair: File; ~/.skk
   pair: Function; convert-standard-filename

~/.skk
  DDSKK を起動した最初の一度だけ読み込まれます。ファイル名の標準設定は OS の種類
  により異なりますが、実際は Emacs の関数 ``convert-standard-filename`` により加
  工されます。

  ``~/.skk`` のファイル名は変数 ``skk-init-file`` で変更することができます。
  また、DDSKK にはこのファイルを自動的にバイトコンパイルする機能があります。

.. index::
   pair: Variablel; skk-user-directory

skk-user-directory
  DDSKK は ``~/.skk`` や ``~/.skk-jisyo`` といった複数のファイルを使用します。
  これらのファイルをひとつのディレクトリにまとめて置きたい場合は、
  変数 ``skk-user-directory`` にそのディレクトリ名を設定します。
  標準設定は ``nil`` です。

  この変数は ``~/.emacs.d/init.el`` で設定してください。
  DDSKK 起動時に ``skk-user-directory`` が指すディレクトリが存在しない場合は、自
  動的に作られます。

  .. code:: emacs-lisp

    (setq skk-user-directory "~/.ddskk")  

  この変数を設定した場合（例えば上記 ``~/.ddskk`` ）、以下に挙げる各変数の標準設
  定値が変更されます。

  .. list-table::

     * - 影響を受ける変数
       - 標準の値
       - 変数 skk-user-directory を設定した場合の値  
     * - skk-init-file
       - ~/.skk
       - ~/.ddskk/init
     * - skk-jisyo
       - ~/.skk-jisyo
       - ~/.ddskk/jisyo
     * - skk-backup-jisyo
       - ~/.skk-jisyo.BAK
       - ~/.ddskk/jisyo.bak
     * - skk-emacs-id-file
       - ~/.skk-emacs-id
       - ~/.ddskk/emacs-id
     * - skk-record-file
       - ~/.skk-record
       - ~/.ddskk/record
     * - skk-study-file
       - ~/.skk-study
       - ~/.ddskk/study
     * - skk-study-backup-file
       - ~/.skk-study.BAK
       - ~/.ddskk/study.bak
     * - skk-bayesian-history-file
       - ~/.skk-bayesian
       - ~/.ddskk/bayesian
     * - skk-bayesian-corpus-file
       - ~/.skk-corpus
       - ~/.ddskk/corpus

  なお、 変数 ``skk-user-directory`` を設定した場合でも、上記「影響を受ける変数」
  を個別に設定している場合は、その個別の設定が優先されます。

skk-init-file の自動コンパイル
------------------------------

ここでは、「DDSKK の設定ファイル」を ``el`` と、「DDSKK の設定ファイルをバイトコ
ンパイルしたファイル」を ``elc`` とそれぞれ呼びます。

変数 ``skk-byte-compile-init-file`` を適切に設定することによって、DDSKK の起動時
に自動的に ``el`` をバイトコンパイルすることができます。

.. list-table::

   * - skk-byte-compile-init-file の値
     - DDSKK の起動時
   * - non-nil
     - | 「 ``elc`` が存在しない」又は「 ``elc`` よりも ``el`` が新しい」ときは、
       | ``el`` をバイトコンパイルした ``elc`` を生成します。
   * - nil
     - ``elc`` よりも ``el`` が新しいときは、 ``elc`` を消去します。

.. index::
   pair: Variablel; skk-byte-compile-init-file

skk-byte-compile-init-file
  設定ファイルの自動バイトコンパイル機能を有効にしたい場合は、
  ``~/.emacs.d/init.el`` に

  .. code:: emacs-lisp

     (setq skk-byte-compile-init-file t)

  と記述します。この変数は ``~/.skk`` が読み込まれる前に調べられるた
  め、 ``~/.skk`` に上記の設定を記述しても無効です。

フック
------

.. index::
   pair: Variablel; skk-mode-hook

skk-mode-hook
  ``C-x C-j`` と入力して SKK モードに入る度に呼ばれます。主にバッファローカルの設
  定などを行います。

.. index::
   pair: Variablel; skk-auto-fill-mode-hook

skk-auto-fill-mode-hook
  ``C-x j`` と入力してオートフィルモード付きで SKK モードに入る度に呼ばれます。
  主にバッファローカルの設定などを行います。

.. index::
   pair: Variablel; skk-load-hook

skk-load-hook
  ``skk.el`` の読み込みを完了した時点で呼ばれます。 ``~/.skk`` は SKK モードを起
  動しなければ読み込まれないのに対し、このフックは ``skk.el`` を読み込んだら SKK
  モードを起動しなくとも呼ばれます。

各ファイルの読み込みが完了した直後に呼ばれるフックは以下のとおり。

.. list-table::

   * - ファイル
     - フック
   * - skk-act.el
     - skk-act-load-hook
   * - skk-auto.el
     - skk-auto-load-hook
   * - skk-azik.el
     - skk-azik-load-hook
   * - skk-comp.el
     - skk-comp-load-hook
   * - skk-gadget.el
     - skk-gadget-load-hook
   * - skk-kakasi.el
     - skk-kakasi-load-hook
   * - skk-kcode.el
     - skk-kcode-load-hook
   * - skk-num.el
     - skk-num-load-hook
   * - skk-server.el
     - skk-server-load-hook

.. index::
   pair: Function; eval-after-load

``load-hook`` が提供されていないプログラムであっても、ロード完了後に何らか
の設定を行いたい場合は、関数 ``eval-after-load`` を使用します。

.. code:: emacs-lisp

   (eval-after-load "skk-look"
     '(...)
   )

Customize による設定変更
------------------------

Emacs 標準の Customize 機能を使って SKK を設定することもできます。
ただし、Customize での設定は ``~/.emacs.d/init.el`` での設定と同様に、
``/.skk`` による設定で上書きされてしまいますので注意してください。

.. index::
   pair: Key; M-x customize-group
   pair: Key; M-x skk-emacs-customize

``M-x customize-group`` を実行すると skk の設定を対話的に変更することができます。
ミニバッファに ``Customize group:`` とプロンプトが表示されます。

.. code:: text

   ------ Minibuffer -------
   Customize group: (default emacs) *
   ------ Minibuffer -------

ここで ``skk`` と答えると、SKK グループの画面へ展開します。
``M-x skk-emacs-customize`` と実行するのも同様です。

あるいは、モードラインの SKK インジケータをマウスの右ボタン（第３ボタン）でクリッ
クすると表示されるメニューから「SKK をカスタマイズ」を選んでも同じ画面となります。

カスタマイズの使い方は Info ([[info:emacs#Easy Customization][Easy Customization in GNU Emacs Manual]].) を参照してください。

skk で設定できる変数の中には、まだこのマニュアルで解説されていないものもあります。
Customize を使うと、それらについても知ることができます。

skk-customize による設定変更
----------------------------

.. index::
   pair: Key; M-x skk-customize

M-x skk-customize
  前述の「Emacs 標準の Customize 機能 ``M-x customize-group`` 」による設定が複雑
  すぎると感じるユーザのために、簡易版として ``M-x skk-customize`` を用意していま
  す。これは SKK グループのユーザオプションのうち、よく使うものだけ抜粋して設定で
  きるようにしたものです。

  これは、モードラインの SKK インジケータをマウスの右ボタン（第３ボタン）でクリッ
  クして表示されるメニューから「SKK をカスタマイズ（簡易版）」を選んで呼び出すこ
  ともできます。

カタカナ、英字入力の便法
========================

この節では、カタカナや全英文字を入力するための、便利な方法を説明します。

かなモードからカタカナを入力
----------------------------

全英文字の入力
--------------

領域の操作
----------

カタカナの見出し語
------------------

文脈に応じた自動モード切り替え
------------------------------

補完
====

読みの前半だけを入力して ~TAB~ を押せば残りを自動的に補ってくれる、これが
補完です。 Emacs ユーザにはおなじみの機能が DDSKK でも使えます。

よく使う長い語を効率良く入力するには、アルファベットの略語を登録する方法
もあります。

読みの補完
----------

補完しながら変換
----------------

動的補完
--------

便利な変換、その他の変換
========================

単漢字変換
----------

検索キーの設定
^^^^^^^^^^^^^^

辞書の設定
^^^^^^^^^^

総画数による単漢字変換
^^^^^^^^^^^^^^^^^^^^^^

部首による単漢字変換
^^^^^^^^^^^^^^^^^^^^

部首の読みによる単漢字変換
^^^^^^^^^^^^^^^^^^^^^^^^^^

接頭辞・接尾辞
--------------

数値変換
--------

アスキー文字を見出し語とした変換
--------------------------------

今日の日付の入力
----------------

プログラム実行変換
------------------

空白・改行・タブを含んだ見出し語の変換
--------------------------------------

カタカナ変換
------------

サ変動詞変換
------------

異体字へ変換する
----------------

ファンクションキーの使い方
--------------------------

キー設定
========

かなモード／カナモードのキー設定
--------------------------------

ローマ字のルールの設定
^^^^^^^^^^^^^^^^^^^^^^

ローマ字ルールの変更例
^^^^^^^^^^^^^^^^^^^^^^

■モードに関連するその他の変数
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

数字や記号文字の入力
^^^^^^^^^^^^^^^^^^^^

閉じ括弧の自動入力
------------------

リージョンを括弧で囲む
----------------------

確定するキー
------------

候補の選択に用いるキー
----------------------

▼モードでの RET
----------------

▼モードでの BS
---------------

送りあり変換中の C-g
--------------------

変換位置の指定方法
------------------

１回の取り消し操作 (undo) の対象
--------------------------------

変換、確定の前後
================

ポイントを戻して▽モードへ
--------------------------

直前の確定を再変換
------------------

自動変換開始
------------

暗黙の確定のタイミング
----------------------

積極的な確定
------------

確定辞書
--------

送り仮名関連
============

SKK の送り仮名の処理は、好みが分かれるところです。色々な対策が用意されていますの
で、試してみて下さい。

送り仮名の厳密なマッチ
----------------------

送り仮名の優先的なマッチ
------------------------

送り仮名の自動処理
------------------

どのように変換されるか
^^^^^^^^^^^^^^^^^^^^^^

辞書登録の際に注意すべきこと
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

候補の順序
==========

skk の初期設定では、変換で確定された単語は、次の変換時では最初に表示されます。
この動作を変更して、効率良く変換する方法があります。

ここで解説するほか、確定辞書を用いた変換も、候補の順序に影響を与えます。

変換の学習
----------

候補の順序の固定
----------------

ベイズ統計を用いた学習
----------------------

辞書関連
========

本節では、辞書の種別と形式、設定方法、その他辞書にまつわる動作や設定を説明します。

辞書の種類
----------

辞書ファイルの指定
------------------

辞書の検索方法の設定
--------------------

辞書検索の設定の具体例
^^^^^^^^^^^^^^^^^^^^^^

辞書検索のための関数
^^^^^^^^^^^^^^^^^^^^

Emacs 付属の辞書
----------------

サーバ関連
----------

サーバコンプリージョン
----------------------

辞書の書式
----------

送りありエントリと送りなしエントリ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

送りありエントリのブロック形式
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

エントリの配列
^^^^^^^^^^^^^^

強制的に辞書登録モードへ入る
----------------------------

誤った登録の削除
----------------

個人辞書ファイルの編集
----------------------

個人辞書の保存動作
------------------

変換及び個人辞書に関する統計
----------------------------

辞書バッファ
------------

辞書バッファの文字コードの設定
------------------------------

辞書バッファの buffer-file-name
-------------------------------

注釈（アノテーション）
======================

かな漢字変換の際に、候補に注釈（アノテーション）が登録されていれば、それを表示す
ることができます。

アノテーションの基礎
--------------------

アノテーションの使用
--------------------

アノテーションの登録
--------------------

アノテーションとして EPWING 辞書を表示する
------------------------------------------

Apple macOS 「辞書」サービスからアノテーションを取得する
--------------------------------------------------------

Wikipedia/Wiktionary からアノテーションを取得する
-------------------------------------------------

外部コマンドからアノテーションを取得する
----------------------------------------

各種アノテーション機能を SKK の枠をこえて活用する
-------------------------------------------------

文字コード関連
==============

文字コードまたはメニューによる文字入力
--------------------------------------

メニューによる文字入力
----------------------

文字コード一覧
--------------

文字コードを知る方法
--------------------


DDSKK 以外のツールを用いた辞書変換
==================================

skk-lookup
----------

skk-look
--------

Lisp シンボル名の補完検索変換
-----------------------------

Google CGI API for Japanese Input を利用したかな漢字変換
--------------------------------------------------------


飾りつけ
========

仮名文字のローマ字プレフィックスのエコー
----------------------------------------

入力モードを示すモードラインの文字列の変更
------------------------------------------

入力モードを示すカーソル色に関する設定
--------------------------------------

変換候補一覧の表示方法
----------------------

▼モードにおける変換候補のハイライト表示
----------------------------------------

変換候補の更なる装飾
--------------------

モードラインの装飾
------------------


ユーザガイダンス関連
====================

エラーなどの日本語表示
----------------------

冗長な案内メッセージの表示
--------------------------

I-search 関連
=============

起動時の入力モードの指定
------------------------

間に空白等を含む文字列の検索
----------------------------


VIP/VIPERとの併用
=================

VIPER については Info を参照してください。


picture-modeとの併用
====================



.. rubric:: 脚注

.. [#] いわゆる半角カナ。以下、このマニュアルでは「半角カナ」と記述します
